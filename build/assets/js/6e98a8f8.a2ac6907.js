"use strict";(self.webpackChunkthree_horizons_docusaurus=self.webpackChunkthree_horizons_docusaurus||[]).push([[142],{614:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"phase8-devbox","title":"Phase 8: Microsoft DevBox Configuration","description":"In this phase, we\'ll set up Microsoft DevBox to provide cloud-based developer environments that are pre-configured with all the tools and access needed for the Three Horizons Platform.","source":"@site/docs/phase8-devbox.md","sourceDirName":".","slug":"/phase8-devbox","permalink":"/docs/phase8-devbox","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":9,"frontMatter":{"sidebar_position":9},"sidebar":"docsSidebar","previous":{"title":"Phase 7: Platform Validation","permalink":"/docs/phase7-validation"},"next":{"title":"Architecture Overview","permalink":"/docs/architecture"}}');var t=o(4848),s=o(8453);const i={sidebar_position:9},a="Phase 8: Microsoft DevBox Configuration",c={},d=[{value:"Step 8.1: Create DevBox Project",id:"step-81-create-devbox-project",level:2},{value:"Step 8.2: Configure DevBox Network Connection",id:"step-82-configure-devbox-network-connection",level:2},{value:"Step 8.3: Create DevBox Pool",id:"step-83-create-devbox-pool",level:2},{value:"Step 8.4: Configure DevBox Image",id:"step-84-configure-devbox-image",level:2},{value:"Step 8.5: Configure DevBox Tools and Extensions",id:"step-85-configure-devbox-tools-and-extensions",level:2},{value:"Step 8.6: Assign Users to DevBox",id:"step-86-assign-users-to-devbox",level:2},{value:"Step 8.7: Configure DevBox Policies",id:"step-87-configure-devbox-policies",level:2},{value:"Step 8.8: Configure DevBox Access",id:"step-88-configure-devbox-access",level:2}];function l(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"phase-8-microsoft-devbox-configuration",children:"Phase 8: Microsoft DevBox Configuration"})}),"\n",(0,t.jsx)(n.p,{children:"In this phase, we'll set up Microsoft DevBox to provide cloud-based developer environments that are pre-configured with all the tools and access needed for the Three Horizons Platform."}),"\n",(0,t.jsx)(n.h2,{id:"step-81-create-devbox-project",children:"Step 8.1: Create DevBox Project"}),"\n",(0,t.jsx)(n.p,{children:"First, let's create a Microsoft DevBox project:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Create a DevBox project\naz devcenter admin project create \\\n  --name three-horizons-devbox \\\n  --resource-group three-horizons-shared \\\n  --location centralus \\\n  --description "Developer environments for Three Horizons Platform"\n\n# Create a DevBox pool\naz devcenter admin devbox-definition create \\\n  --devbox-definition-name standard-devbox \\\n  --project-name three-horizons-devbox \\\n  --resource-group three-horizons-shared \\\n  --image-reference "microsoftwindowsdesktop:windows-ent-cpc:win11-21h2-ent:latest" \\\n  --os-storage-type ssd \\\n  --sku general_i_8c32gb256ssd\n'})}),"\n",(0,t.jsx)(n.h2,{id:"step-82-configure-devbox-network-connection",children:"Step 8.2: Configure DevBox Network Connection"}),"\n",(0,t.jsx)(n.p,{children:"Set up network connectivity for DevBox:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create a network connection\naz devcenter admin network-connection create \\\n  --name three-horizons-network \\\n  --resource-group three-horizons-shared \\\n  --location centralus \\\n  --domain-join-type none \\\n  --subnet-id $(az network vnet subnet show --resource-group three-horizons-platform --vnet-name three-horizons-vnet --name services-subnet --query id -o tsv)\n\n# Attach network connection to project\naz devcenter admin project network-connection attach \\\n  --project-name three-horizons-devbox \\\n  --resource-group three-horizons-shared \\\n  --network-connection-name three-horizons-network \\\n  --network-connection-resource-group three-horizons-shared\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-83-create-devbox-pool",children:"Step 8.3: Create DevBox Pool"}),"\n",(0,t.jsx)(n.p,{children:"Create a pool of DevBoxes for developers:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create a DevBox pool\naz devcenter admin devbox-pool create \\\n  --name three-horizons-pool \\\n  --project-name three-horizons-devbox \\\n  --resource-group three-horizons-shared \\\n  --devbox-definition-name standard-devbox \\\n  --network-connection-name three-horizons-network \\\n  --network-connection-resource-group three-horizons-shared \\\n  --local-administrator enabled\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-84-configure-devbox-image",children:"Step 8.4: Configure DevBox Image"}),"\n",(0,t.jsx)(n.p,{children:"Create a custom DevBox image with pre-installed tools:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Create a custom image using Azure Image Builder\naz image builder create \\\n  --resource-group three-horizons-shared \\\n  --name three-horizons-devbox-image \\\n  --image-template @devbox-image-template.json\n\n# Start the image build\naz image builder run \\\n  --resource-group three-horizons-shared \\\n  --name three-horizons-devbox-image\n\n# Wait for the image build to complete\naz image builder wait \\\n  --resource-group three-horizons-shared \\\n  --name three-horizons-devbox-image \\\n  --custom "status.runState==\'Completed\'"\n\n# Get the image ID\nIMAGE_ID=$(az image builder show \\\n  --resource-group three-horizons-shared \\\n  --name three-horizons-devbox-image \\\n  --query "outputResources[0].id" -o tsv)\n\n# Update the DevBox definition to use the custom image\naz devcenter admin devbox-definition update \\\n  --devbox-definition-name standard-devbox \\\n  --project-name three-horizons-devbox \\\n  --resource-group three-horizons-shared \\\n  --image-reference $IMAGE_ID\n'})}),"\n",(0,t.jsx)(n.h2,{id:"step-85-configure-devbox-tools-and-extensions",children:"Step 8.5: Configure DevBox Tools and Extensions"}),"\n",(0,t.jsx)(n.p,{children:"Create a script to install required tools and extensions:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-powershell",children:'# Create a PowerShell script for DevBox setup\ncat > devbox-setup.ps1 <<EOF\n# Install Chocolatey\nSet-ExecutionPolicy Bypass -Scope Process -Force\n[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072\nInvoke-Expression ((New-Object System.Net.WebClient).DownloadString(\'https://chocolatey.org/install.ps1\'))\n\n# Install development tools\nchoco install -y git\nchoco install -y vscode\nchoco install -y nodejs-lts\nchoco install -y python\nchoco install -y azure-cli\nchoco install -y kubernetes-cli\nchoco install -y kubernetes-helm\nchoco install -y docker-desktop\nchoco install -y github-desktop\n\n# Install VS Code extensions\ncode --install-extension ms-vscode.azure-account\ncode --install-extension ms-azuretools.vscode-docker\ncode --install-extension ms-kubernetes-tools.vscode-kubernetes-tools\ncode --install-extension github.copilot\ncode --install-extension github.vscode-pull-request-github\ncode --install-extension redhat.vscode-yaml\n\n# Configure Git\ngit config --global user.name "Three Horizons Developer"\ngit config --global user.email "developer@example.com"\n\n# Clone starter repositories\nmkdir -p C:/Projects\ncd C:/Projects\ngit clone https://github.com/your-org/three-horizons-templates.git\n\n# Create desktop shortcuts\n$WshShell = New-Object -ComObject WScript.Shell\n$Shortcut = $WshShell.CreateShortcut("$env:USERPROFILE\\Desktop\\Developer Hub.lnk")\n$Shortcut.TargetPath = "https://devhub.example.com"\n$Shortcut.Save()\nEOF\n\n# Upload the script to Azure Storage for use in DevBox\naz storage blob upload \\\n  --account-name yourstorageaccount \\\n  --container-name scripts \\\n  --name devbox-setup.ps1 \\\n  --file devbox-setup.ps1 \\\n  --auth-mode login\n'})}),"\n",(0,t.jsx)(n.h2,{id:"step-86-assign-users-to-devbox",children:"Step 8.6: Assign Users to DevBox"}),"\n",(0,t.jsx)(n.p,{children:"Assign users to the DevBox project:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Assign users to the DevBox project\naz role assignment create \\\n  --role "DevCenter DevBox User" \\\n  --assignee-object-id $(az ad user show --id developer@example.com --query id -o tsv) \\\n  --scope $(az devcenter admin project show --name three-horizons-devbox --resource-group three-horizons-shared --query id -o tsv)\n\n# Create a DevBox for a specific user\naz devcenter dev devbox create \\\n  --name developer-devbox \\\n  --project-name three-horizons-devbox \\\n  --pool-name three-horizons-pool\n'})}),"\n",(0,t.jsx)(n.h2,{id:"step-87-configure-devbox-policies",children:"Step 8.7: Configure DevBox Policies"}),"\n",(0,t.jsx)(n.p,{children:"Set up policies for DevBox usage:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create an auto-stop policy\naz devcenter admin devbox-pool update \\\n  --name three-horizons-pool \\\n  --project-name three-horizons-devbox \\\n  --resource-group three-horizons-shared \\\n  --auto-stop-time 30\n"})}),"\n",(0,t.jsx)(n.h2,{id:"step-88-configure-devbox-access",children:"Step 8.8: Configure DevBox Access"}),"\n",(0,t.jsx)(n.p,{children:"Set up access to internal resources:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Create a private endpoint for DevBox to access internal resources\naz network private-endpoint create \\\n  --resource-group three-horizons-shared \\\n  --name devbox-acr-endpoint \\\n  --vnet-name three-horizons-vnet \\\n  --subnet endpoint-subnet \\\n  --private-connection-resource-id $(az acr show --name $ACR_NAME --resource-group three-horizons-shared --query id -o tsv) \\\n  --group-id registry \\\n  --connection-name devbox-acr-connection\n\n# Create a private DNS zone for ACR\naz network private-dns zone create \\\n  --resource-group three-horizons-shared \\\n  --name privatelink.azurecr.io\n\n# Link the private DNS zone to the VNet\naz network private-dns link vnet create \\\n  --resource-group three-horizons-shared \\\n  --zone-name privatelink.azurecr.io \\\n  --name acr-dns-link \\\n  --virtual-network three-horizons-vnet \\\n  --registration-enabled false\n\n# Create DNS records for the private endpoint\naz network private-endpoint dns-zone-group create \\\n  --resource-group three-horizons-shared \\\n  --endpoint-name devbox-acr-endpoint \\\n  --name acr-zone-group \\\n  --private-dns-zone privatelink.azurecr.io \\\n  --zone-name acr\n"})}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsx)(n.p,{children:"For a complete developer experience, consider:"}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Creating custom DevBox images with pre-installed tools and configurations"}),"\n",(0,t.jsx)(n.li,{children:"Setting up automatic repository cloning"}),"\n",(0,t.jsx)(n.li,{children:"Configuring IDE settings and extensions"}),"\n",(0,t.jsx)(n.li,{children:"Providing sample projects and templates"}),"\n",(0,t.jsx)(n.li,{children:"Creating documentation shortcuts"}),"\n"]})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>a});var r=o(6540);const t={},s=r.createContext(t);function i(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);